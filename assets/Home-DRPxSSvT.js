import{r as s,A as D,a as g,c as w,q as A,w as j,j as e,d as N}from"./index-BzMBnkf4.js";import{F as b}from"./CalendarDaysIcon-0fN9HM-M.js";import{F as y}from"./MapPinIcon-B7sHTctG.js";import{F}from"./ClockIcon-CdyzJf0f.js";function H({title:r,titleId:o,...d},x){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":o},d),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const T=s.forwardRef(H);function M(){const{currentUser:r,profile:o}=s.useContext(D),[d,x]=s.useState([]),[p,v]=s.useState([]),u=t=>{const a=Number(t),m=a>=12?"PM":"AM";return`${a%12===0?12:a%12}:00 ${m}`};return s.useEffect(()=>{const t=g(w(N,"events"),a=>{const m=a.docs.map(n=>({id:n.id,...n.data()})),c=new Date;c.setHours(0,0,0,0);const h=m.filter(n=>{const l=new Date(n.date);return l.setHours(0,0,0,0),l>=c});x(h)});if(r){const a=A(w(N,"appointments"),j("requestedBy","==",r.uid),j("status","==","approved")),m=g(a,c=>{const h=c.docs.map(i=>({id:i.id,...i.data()})),n=new Date,l=h.filter(i=>new Date(i.preferredDateTime)>=n);l.sort((i,f)=>new Date(i.preferredDateTime).getTime()-new Date(f.preferredDateTime).getTime()),v(l)});return()=>{t(),m()}}return()=>t()},[r]),e.jsxs("div",{className:"flex flex-col w-full bg-[#f1f5f9] p-4",children:[e.jsxs("div",{className:"bg-[#0F8A69] text-white rounded-xl p-6 shadow-md flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-semibold",children:["HI, ",o?.firstName," ",o?.lastName]}),e.jsx("span",{className:"opacity-90",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsx("h2",{className:"mt-6 mb-3 text-lg font-semibold text-[#0F8A69]",children:"Upcoming Appointment"}),p.length===0?e.jsx("p",{className:"text-gray-500 text-center py-3",children:"No upcoming approved appointments."}):p.map(t=>e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md border border-gray-200 mb-4",children:[e.jsx("div",{className:"text-[#0F8A69] font-bold text-sm uppercase tracking-wide mb-2",children:t.serviceType}),e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(T,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),e.jsx("span",{className:"font-medium",children:t.purpose})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),new Date(t.preferredDateTime).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]}),t.location&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),t.location||"To be assigned"]})]},t.id)),e.jsx("h2",{className:"mt-6 mb-3 text-lg font-semibold text-[#0F8A69]",children:"Upcoming Health Events"}),e.jsx("div",{className:"grid gap-4",children:d.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No events available."}):d.map(t=>e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition",children:[e.jsx("div",{className:"text-[#0F8A69] font-bold text-sm uppercase tracking-wide mb-2",children:t.eventType}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.title}),e.jsxs("div",{className:"flex items-center mt-2 text-gray-600",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),e.jsx("span",{className:"font-medium",children:t.location})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[e.jsx(F,{className:"w-5 h-5 mr-2 text-[#0F8A69]"}),u(t.startTime)," â€” ",u(t.endTime)]})]},t.id))})]})}export{M as default};
