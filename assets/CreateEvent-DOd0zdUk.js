import{g as A,c as P,d as B,T as q,r as a,j as e}from"./index-B8ijSHVB.js";const H=async i=>{try{return{success:!0,id:(await A(P(B,"events"),{...i,createdAt:q.now()})).id}}catch(r){return console.error("Error creating event:",r),{success:!1,error:r}}};function L(){const[i,r]=a.useState(""),[d,p]=a.useState(""),[u,v]=a.useState(""),[m,b]=a.useState(""),[n,f]=a.useState(""),[o,c]=a.useState(""),[j,N]=a.useState([]),[l,S]=a.useState(!1),[y,w]=a.useState(""),[C,h]=a.useState(""),[k,x]=a.useState(!1),T=Array.from({length:12},(t,s)=>String(s+7)),E=t=>{const s=Number(t),g=s>=12?"PM":"AM";return`${s%12===0?12:s%12}:00 ${g}`};a.useEffect(()=>{if(!n){N([]),c("");return}const s=Number(n)+2,g=T.filter(D=>Number(D)>=s);N(g),o&&Number(o)<s&&c("")},[n]);const M=async()=>{if(!i||!d||!u||!m||!n||!o){h("Please fill all fields.");return}S(!0),h(""),w("");const s=await H({eventType:i,title:d,location:u,date:m,startTime:n,endTime:o});S(!1),x(!1),s.success?(w("Event created successfully!"),r(""),p(""),v(""),b(""),f(""),c("")):h(typeof s.error=="string"?s.error:"Something went wrong.")};return e.jsxs("div",{className:"p-8 max-w-full mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#0F8A69] mb-6",children:"Create Barangay Health Event"}),y&&e.jsx("p",{className:"text-green-600 font-medium mb-4",children:y}),C&&e.jsx("p",{className:"text-red-600 font-medium mb-4",children:C}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),x(!0)},className:"bg-white shadow-md rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Event Type"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg",value:i,onChange:t=>r(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select event type"}),e.jsx("option",{value:"Vaccination Drive",children:"Vaccination Drive"}),e.jsx("option",{value:"Medical Mission",children:"Medical Mission"}),e.jsx("option",{value:"Dental Checkup",children:"Dental Checkup"}),e.jsx("option",{value:"Blood Donation",children:"Blood Donation"}),e.jsx("option",{value:"Health Seminar",children:"Health Seminar"}),e.jsx("option",{value:"Nutrition Program",children:"Nutrition Program"}),e.jsx("option",{value:"Prenatal Checkup",children:"Prenatal Checkup"}),e.jsx("option",{value:"Deworming",children:"Deworming Program"}),e.jsx("option",{value:"TB Screening",children:"TB Screening"}),e.jsx("option",{value:"Senior Wellness",children:"Senior Citizen Wellness Program"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Event Title"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",placeholder:"e.g. Bakuna Kontra Tigdas",value:d,onChange:t=>p(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Location"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",placeholder:"Barangay Hall, Covered Court, etc.",value:u,onChange:t=>v(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Event Date"}),e.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg",value:m,onChange:t=>b(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Start Time"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg",value:n,onChange:t=>f(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select start time"}),T.map(t=>e.jsx("option",{value:t,children:E(t)},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"End Time"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg",value:o,onChange:t=>c(t.target.value),required:!0,disabled:!n,children:[e.jsx("option",{value:"",children:"Select end time"}),j.map(t=>e.jsx("option",{value:t,children:E(t)},t))]}),!n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a start time first."}),n&&j.length===0&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No valid end times â€” event must be at least 2 hours."})]}),e.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 rounded-lg text-white transition ${l?"bg-gray-400 cursor-not-allowed":"bg-[#0F8A69] hover:bg-[#0D7A5B]"}`,children:l?"Saving...":"Create Event"})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-80",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Confirm Action"}),e.jsx("p",{className:"mb-6 text-gray-700",children:"Are you sure you want to create this event?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition",disabled:l,children:"Cancel"}),e.jsx("button",{onClick:M,className:"px-4 py-2 rounded-lg bg-[#0F8A69] text-white hover:bg-[#0c7356] transition",disabled:l,children:l?"Saving...":"Confirm"})]})]})})]})}export{L as default};
