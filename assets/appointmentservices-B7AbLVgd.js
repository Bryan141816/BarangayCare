import{g as p,c as i,d as n,T as s,f as u,k as d,l as m}from"./index-D2d6yvbQ.js";const g=async e=>{try{return{success:!0,id:(await p(i(n,"appointments"),{...e,status:"waiting for approval",location:"",createdAt:s.now(),updatedAt:s.now()})).id}}catch(t){return{success:!1,error:t.message||"Unknown error creating appointment"}}},h=async(e,t)=>{try{const a=u(n,"appointments",e),r=await d(a);if(!r.exists())return{success:!1,error:"Appointment not found"};const o=r.data().requestedBy;await m(a,{...t,updatedAt:s.now()});const c=f(t.status);return o&&c&&await p(i(n,"notifications"),{to:o,appointmentId:e,message:c,createdAt:s.now(),read:!1}),{success:!0}}catch(a){return{success:!1,error:a.message}}};function f(e){switch(e){case"approved":return"Your appointment has been approved.";case"rejected":return"Your appointment was rejected.";case"completed":return"Your appointment has been marked as completed.";case"failed":return"Your appointment has been marked as failed.";default:return"Your appointment has been updated."}}export{g as c,h as u};
