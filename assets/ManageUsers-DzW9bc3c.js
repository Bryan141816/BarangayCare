import{r,j as e,i as j,c as N,d as x,f as g,l as u}from"./index-BzMBnkf4.js";function f(){const[c,i]=r.useState([]),[h,p]=r.useState(!0),[d,o]=r.useState(null);r.useEffect(()=>{(async()=>{try{const a=(await j(N(x,"users"))).docs.map(l=>({id:l.id,...l.data()}));i(a)}catch(t){console.error("Error fetching users:",t)}finally{p(!1)}})()},[]);const m=async(s,t)=>{o(s);try{const a=g(x,"users",s);await u(a,{role:t}),i(l=>l.map(n=>n.id===s?{...n,role:t}:n))}catch(a){console.error("Error updating role:",a),alert("Failed to update role.")}finally{o(null)}};return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#0F8A69] mb-6",children:"Manage Users"}),h?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx("div",{className:"w-10 h-10 border-4 border-t-green-500 border-gray-300 rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#0F8A69] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Name"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Email"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Role"}),e.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"}),e.jsx("th",{className:"py-3 px-4 text-center"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-4 px-4 text-center text-gray-500",children:"No users found."})}):c.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"py-3 px-4",children:[s.firstName," ",s.lastName]}),e.jsx("td",{className:"py-3 px-4",children:s.email}),e.jsx("td",{className:"py-3 px-4 capitalize",children:s.role}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("select",{className:"px-3 py-1 border rounded-lg",value:s.role,disabled:d===s.id,onChange:t=>m(s.id,t.target.value),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"health worker",children:"Health Worker"}),e.jsx("option",{value:"superadmin",children:"Super Admin"})]})}),e.jsx("td",{className:"py-3 px-4 text-center w-24",children:d===s.id?e.jsx("span",{className:"text-green-500 animate-pulse",children:"Saving..."}):e.jsx("span",{className:"opacity-0",children:"Saving..."})})]},s.id))})]})})]})}export{f as default};
